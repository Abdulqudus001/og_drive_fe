(window.webpackJsonp=window.webpackJsonp||[]).push([[5],{694:function(e,t,r){"use strict";r.r(t);r(12),r(10),r(7),r(9),r(3),r(97);var n=r(19),o=r(1),c=r(25);function l(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}var d={layout:"admin",data:function(){return{dialog:!1,search:"",deleteDialog:!1,adminDialog:!1,blockDialog:!1,loading:!1,headers:[{text:"Full Name",align:"start",sortable:!1,value:"full_name"},{text:"Department",value:"department"},{text:"OGID",value:"ogId"},{text:"Role",value:"role"},{text:"Username",value:"username"},{text:"Actions",value:"actions",sortable:!1}],desserts:[],editedIndex:-1,error:{status:!1,message:""},alertError:{status:!1,message:""},success:{status:!1,message:""},editedItem:{username:"",newogId:"",email:"",department:"",fullName:""},adminItem:{},deletedItem:{},removeItem:{}}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?l(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):l(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({allUsers:function(){return this.$store.state.allUsers}},Object(c.b)(["getUsers","getFiles","isLoggedIn","getFolders"]),{formTitle:function(){return-1===this.editedIndex?"New Item":"Edit Item"}}),watch:{dialog:function(e){e||this.close()}},mounted:function(){var e=this.isLoggedIn(this);this.$axios.defaults.headers.common.Authorization="Bearer ".concat(e),this.fetchUsers()},methods:{editItem:function(e){this.editedIndex=this.$store.state.allUsers.users.indexOf(e),this.editedItem=Object.assign({},e),this.dialog=!0},userLogin:function(e){var t=this;return Object(n.a)(regeneratorRuntime.mark((function r(){var n;return regeneratorRuntime.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return localStorage.setItem("currentUserId",e._id),t.loading=!0,r.prev=2,r.next=5,t.$axios.get("admin/user/".concat(e.ogId));case 5:if(!(n=r.sent)){r.next=12;break}return t.loading=!1,t.$store.commit("LOAD_USER_DETAILS",n.data),t.$router.push({path:"/admin/user/".concat(e.ogId)}),t.success.message=n.data.message,r.abrupt("return",Promise.resolve(n.data));case 12:r.next=20;break;case 14:r.prev=14,r.t0=r.catch(2),t.loading=!1,t.error.status=!0,r.t0.response&&r.t0.response.data.message?t.error.message=r.t0.response.data.message:t.error.message="Something went wrong",t.fetchUsers();case 20:case"end":return r.stop()}}),r,null,[[2,14]])})))()},deleteItem:function(e){this.deletedItem=Object.assign({},e),this.deleteDialog=!0},admin:function(e){this.adminItem=Object.assign({},e),this.adminDialog=!0},block:function(e){this.removeItem=Object.assign({},e),this.blockDialog=!0},close:function(){var e=this;this.dialog=!1,this.deleteDialog=!1,this.adminDialog=!1,this.blockDialog=!1,setTimeout((function(){e.editedItem=Object.assign({},e.defaultItem),e.editedIndex=-1}),300)},save:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$axios.patch("admin/updateUser/".concat(e.editedItem.ogId),e.editedItem);case 4:if(!(r=t.sent)){t.next=13;break}return e.loading=!1,e.$store.commit("LOAD_ALL_USERS",r.data),e.fetchUsers(),e.dialog=!1,e.success.status=!0,e.success.message=r.data.message,t.abrupt("return",Promise.resolve(r.data));case 13:t.next=21;break;case 15:t.prev=15,t.t0=t.catch(1),e.loading=!1,e.error.status=!0,t.t0.response&&t.t0.response.data.message?e.error.message=t.t0.response.data.message:e.error.message="Something went wrong",e.fetchUsers();case 21:case"end":return t.stop()}}),t,null,[[1,15]])})))()},deleteUser:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.isLoggedIn(e),e.loading=!0,t.prev=2,t.next=5,e.$axios.delete("admin/user",{headers:{Authorization:"Bearer ".concat(r)},data:{user_id:e.deletedItem._id}});case 5:if(!(n=t.sent)){t.next=14;break}return e.loading=!1,e.success.status=!0,e.success.message=n.data.message,e.$store.commit("LOAD_ALL_USERS",n.data),e.fetchUsers(),e.deleteDialog=!1,t.abrupt("return",Promise.resolve(n.data));case 14:t.next=22;break;case 16:t.prev=16,t.t0=t.catch(2),e.loading=!1,e.error.status=!0,t.t0.response&&t.t0.response.data.message?e.error.message=t.t0.response.data.message:e.error.message="Something went wrong",e.fetchUsers();case 22:case"end":return t.stop()}}),t,null,[[2,16]])})))()},makeAdmin:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$axios.patch("admin/makeAdmin/".concat(e.adminItem.ogId),e.adminItem);case 4:(r=t.sent)&&(e.loading=!1,e.success.status=!0,e.success.message=r.data.message,e.$store.commit("LOAD_ALL_USERS",r.data),e.fetchUsers(),e.adminDialog=!1),t.next=14;break;case 8:t.prev=8,t.t0=t.catch(1),e.loading=!1,e.error.status=!0,t.t0.response&&t.t0.response.data.message?e.error.message=t.t0.response.data.message:e.error.message="Something went wrong",e.fetchUsers();case 14:case"end":return t.stop()}}),t,null,[[1,8]])})))()},removeAdmin:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.loading=!0,t.prev=1,t.next=4,e.$axios.patch("admin/removeAdmin/".concat(e.removeItem.ogId),e.removeItem);case 4:if(!(r=t.sent)){t.next=13;break}return e.loading=!1,e.success.status=!0,e.success.message=r.data.message,e.$store.commit("LOAD_ALL_USERS",r.data),e.fetchUsers(),e.blockDialog=!1,t.abrupt("return",Promise.resolve(r.data));case 13:t.next=21;break;case 15:t.prev=15,t.t0=t.catch(1),e.loading=!1,e.error.status=!0,t.t0.response&&t.t0.response.data.message?e.error.message=t.t0.response.data.message:e.error.message="Something went wrong",e.fetchUsers();case 21:case"end":return t.stop()}}),t,null,[[1,15]])})))()}}},m=r(20),v=r(22),f=r.n(v),h=r(115),_=r(193),x=r(11),k=r(416),I=r(417),w=r(682),O=r(423),D=r(154),U=r(420),A=r(421),j=r(422),y=r(72),S=r(53),$=r(34),component=Object(m.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("v-container",[r("v-virtual-scroll",{attrs:{items:e.allUsers.users,"item-height":50,height:"300"}},[r("v-data-table",{staticClass:"elevation-1",attrs:{headers:e.headers,items:e.allUsers.users,search:e.search,height:"70vh","fixed-header":""},scopedSlots:e._u([{key:"top",fn:function(){return[r("v-toolbar",{attrs:{flat:"",color:"white"}},[r("v-toolbar-title",[e._v("All Users")]),e._v(" "),r("v-spacer"),e._v(" "),r("v-text-field",{attrs:{"append-icon":"mdi-magnify",label:"Search","single-line":"","hide-details":""},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}}),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.dialog,callback:function(t){e.dialog=t},expression:"dialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v(e._s(e.formTitle))])]),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Full Name"},model:{value:e.editedItem.fullName,callback:function(t){e.$set(e.editedItem,"fullName",t)},expression:"editedItem.fullName"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Username"},model:{value:e.editedItem.username,callback:function(t){e.$set(e.editedItem,"username",t)},expression:"editedItem.username"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"OGID"},model:{value:e.editedItem.newOgId,callback:function(t){e.$set(e.editedItem,"newOgId",t)},expression:"editedItem.newOgId"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Email"},model:{value:e.editedItem.email,callback:function(t){e.$set(e.editedItem,"email",t)},expression:"editedItem.email"}})],1),e._v(" "),r("v-col",{attrs:{cols:"12",sm:"6",md:"4"}},[r("v-text-field",{attrs:{label:"Department"},model:{value:e.editedItem.department,callback:function(t){e.$set(e.editedItem,"department",t)},expression:"editedItem.department"}})],1)],1)],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("\n                  Cancel\n                ")]),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:"",loading:e.loading},on:{click:e.save}},[e._v("\n                  Save\n                ")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.deleteDialog,callback:function(t){e.deleteDialog=t},expression:"deleteDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Delete User")])]),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[e._v("\n                    Are you sure you want to delete this user?\n                  ")])],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("\n                  Cancel\n                ")]),e._v(" "),r("v-btn",{attrs:{color:"red darken-1",text:"",loading:e.loading},on:{click:e.deleteUser}},[e._v("\n                  Delete\n                ")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.adminDialog,callback:function(t){e.adminDialog=t},expression:"adminDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Give Admin Privileges")])]),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[e._v("\n                    Are you sure you want to make this user an admin?\n                  ")])],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("\n                  Cancel\n                ")]),e._v(" "),r("v-btn",{attrs:{color:"green darken-1",text:"",loading:e.loading},on:{click:e.makeAdmin}},[e._v("\n                  Yes!\n                ")])],1)],1)],1),e._v(" "),r("v-dialog",{attrs:{"max-width":"500px"},model:{value:e.blockDialog,callback:function(t){e.blockDialog=t},expression:"blockDialog"}},[r("v-card",[r("v-card-title",[r("span",{staticClass:"headline"},[e._v("Remove Admin Privileges")])]),e._v(" "),r("v-card-text",[r("v-container",[r("v-row",[e._v("\n                    Are you sure you want to remove admin privileges?\n                  ")])],1)],1),e._v(" "),r("v-card-actions",[r("v-spacer"),e._v(" "),r("v-btn",{attrs:{color:"blue darken-1",text:""},on:{click:e.close}},[e._v("\n                  Cancel\n                ")]),e._v(" "),r("v-btn",{attrs:{color:"green darken-1",text:"",loading:e.loading},on:{click:e.removeAdmin}},[e._v("\n                  Yes!\n                ")])],1)],1)],1)],1)]},proxy:!0},{key:"item.actions",fn:function(t){var n=t.item;return[r("v-icon",{staticClass:"mr-2",attrs:{color:"yellow",title:"Edit User",small:""},on:{click:function(t){return e.editItem(n)}}},[e._v("\n          mdi-pencil\n        ")]),e._v(" "),r("v-icon",{attrs:{color:"red",title:"Delete User",small:""},on:{click:function(t){return e.deleteItem(n)}}},[e._v("\n          mdi-delete\n        ")]),e._v(" "),"user"==n.role?r("v-icon",{attrs:{color:"green",title:"Give Admin privileges",small:""},on:{click:function(t){return e.admin(n)}}},[e._v("\n          mdi-account\n        ")]):e._e(),e._v(" "),"admin"==n.role?r("v-icon",{attrs:{color:"orange",title:"Block Admin privileges",small:""},on:{click:function(t){return e.block(n)}}},[e._v("\n          mdi-block-helper\n        ")]):e._e(),e._v(" "),r("v-icon",{attrs:{color:"black",title:"Login to User account",small:""},on:{click:function(t){return e.userLogin(n)}}},[e._v("\n          mdi-eye\n        ")])]}}])})],1),e._v(" "),e.loading?r("Loader"):e._e(),e._v(" "),e.error.status?r("v-snackbar",{attrs:{timeout:5e3},model:{value:e.error.status,callback:function(t){e.$set(e.error,"status",t)},expression:"error.status"}},[e._v("\n    "+e._s(e.error.message)+"\n    "),r("v-btn",{attrs:{color:"pink",text:""},on:{click:function(t){e.error.status=!1}}},[e._v("\n      Close\n    ")])],1):e._e(),e._v(" "),e.success.status?r("v-snackbar",{attrs:{timeout:5e3},model:{value:e.success.status,callback:function(t){e.$set(e.success,"status",t)},expression:"success.status"}},[e._v("\n    "+e._s(e.success.message)+"\n    "),r("v-btn",{attrs:{color:"green",text:""},on:{click:function(t){e.success.status=!1}}},[e._v("\n      Close\n    ")])],1):e._e()],1)}),[],!1,null,null,null);t.default=component.exports;f()(component,{VBtn:h.a,VCard:_.a,VCardActions:x.a,VCardText:x.b,VCardTitle:x.c,VCol:k.a,VContainer:I.a,VDataTable:w.a,VDialog:O.a,VIcon:D.a,VRow:U.a,VSnackbar:A.a,VSpacer:j.a,VTextField:y.a,VToolbar:S.a,VToolbarTitle:$.a})}}]);