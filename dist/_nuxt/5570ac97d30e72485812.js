(window.webpackJsonp=window.webpackJsonp||[]).push([[10],{603:function(e,t,r){var content=r(669);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(15).default)("3f57ce57",content,!0,{sourceMap:!1})},604:function(e,t,r){var content=r(671);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,r(15).default)("2dd96f6c",content,!0,{sourceMap:!1})},668:function(e,t,r){"use strict";var o=r(603);r.n(o).a},669:function(e,t,r){(t=r(14)(!1)).push([e.i,".toolbar[data-v-85006d22]{min-height:100px}.toolbar[data-v-85006d22] .v-toolbar__content{display:block;padding:0}.count[data-v-85006d22]{margin-bottom:0;margin-left:5px;font-size:1.5em;opacity:.7}.my-drive[data-v-85006d22]{height:84vh;padding:20px 20px 50px;position:relative;overflow-y:auto}.my-drive .link[data-v-85006d22]{text-decoration:none;color:rgba(0,0,0,.87)}.files[data-v-85006d22]{display:grid;grid-template-columns:repeat(auto-fit,minmax(215px,215px));justify-content:center;grid-gap:15px;gap:15px}@media only screen and (min-width:768px){.files[data-v-85006d22]{justify-content:flex-start}}.shadow[data-v-85006d22] .v-input__slot{box-shadow:1px 4px 7px rgba(68,86,108,.1)!important}.file-details[data-v-85006d22]{list-style-type:none}.file-actions[data-v-85006d22]{width:100%;max-height:50px}.file-actions a[data-v-85006d22]{height:-webkit-fit-content;height:-moz-fit-content;height:fit-content;text-decoration:none}.divider[data-v-85006d22]{width:100%;height:1px}.small--text[data-v-85006d22]{font-size:14px}",""]),e.exports=t},670:function(e,t,r){"use strict";var o=r(604);r.n(o).a},671:function(e,t,r){(t=r(14)(!1)).push([e.i,".toolbar[data-v-43d368b2]{min-height:100px}.toolbar[data-v-43d368b2] .v-toolbar__content{display:block;padding:0}.count[data-v-43d368b2]{margin-bottom:0;margin-left:5px;font-size:1.5em;opacity:.7}.shadow[data-v-43d368b2] .v-input__slot{box-shadow:1px 4px 7px rgba(68,86,108,.1)!important}",""]),e.exports=t},688:function(e,t,r){"use strict";r.r(t);r(12),r(10),r(8),r(3),r(9),r(25),r(27),r(37);var o=r(1),l=r(26),n=r(40),d=r(24),c=(r(38),r(430)),f=r.n(c),h=r(610),m=r(611),v=r(574),w=r(7);function _(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}function y(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?_(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):_(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var F={layout:"adminDrive",components:{File:h.a,Folder:m.a,Loader:n.a,Preview:v.a},filters:{date:function(e){return e?f()(e).format("MMMM Do YYYY"):null}},props:{folders:{type:Array,default:function(){}},fileKey:{type:String,default:""}},data:function(){return{routeName:"",loading:!1,searchFiles:"",fileTypes:["pdf","Spreadsheets","Presentations"],fileType:"",selectedFiles:[],selectedFolders:[],allFiles:[],allFolders:[],showDrawer:!1,loadingDetails:!1,fileDetails:"",previewData:null,showPreview:!1}},computed:y({},Object(l.b)(["getFolders","isLoggedIn","getUserDirectories"]),{filteredFiles:function(){var e=this;return this.globalSearchFiles?this.globalSearchFiles.filter((function(t){return t.filename.toLowerCase().includes(e.searchFiles.toLowerCase())})):this.allFiles.filter((function(t){return t.filename.toLowerCase().includes(e.searchFiles.toLowerCase())}))},filteredFolders:function(){var e=this;return this.globalSearchDirectories?this.globalSearchDirectories.filter((function(t){return t.dirname.toLowerCase().includes(e.searchFiles.toLowerCase())})):this.allFolders.filter((function(t){return t.parent_dir._id===e.$route.params.name})).filter((function(t){return t.dirname.toLowerCase().includes(e.searchFiles.toLowerCase())}))}}),mounted:function(){var e=this.isLoggedIn(this);this.$axios.defaults.headers.common.Authorization="Bearer ".concat(e),this.getFolderDetails(),w.a.$on("addedNewFile",this.getFolderDetails),w.a.$on("addedNewFolder",this.getFolderDetails),w.a.$on("moved",this.getFolderDetails)},beforeDestroy:function(){this.$store.dispatch("removeAdminBreadCrumb","/admin/user/".concat(this.$route.params.id,"/folder/").concat(this.$route.params.name))},methods:{isImage:function(details){if(details){var e=details.type.split("/")[1];return!!["png","jpeg","jpg","gif","mp4","mp3","webp","svg"].includes(e)}},previewFile:function(e){var t={type:e.file_type,url:e.file_url},data=y({isImage:this.isImage(t)},e);this.previewData=data,this.showPreview=!0},getUserInitials:function(e){if(e){var t=e.split(" ").reduce((function(e,t){return"".concat(e).concat(t[0])}),"");return t.length>2?"".concat(t[0]).concat(t[1]):t}return null},deleteFolder:function(e){var t=this;this.loading=!0;var r=this.getUser(this);this.$axios.delete("directory/deleteDirectory/".concat(e)).then((function(){w.a.$emit("hideAction"),t.getFolderDetails(),t.$store.dispatch("fetchFolders",r.id)})).catch((function(e){w.a.$emit("hideAction"),t.loading=!1,t.error.status=!0,t.error.message=e.response.data.message}))},deleteFile:function(e){var t=this;this.loading=!0,this.$axios.delete("/files",{data:{file_id:e}}).then((function(){t.getFolderDetails(),t.loading=!1})).catch((function(e){t.loading=!1,t.error.status=!0,t.error.message=e.response.data.message}))},getFolderDetails:function(){var e=this;void 0!==this.$route.params.name&&(this.loading=!0,this.$axios.get("directory/".concat(this.$route.params.name)).then((function(t){var data=t.data;e.loading=!1,e.$store.dispatch("addAdminBreadCrumbs",{text:data.directory.dirname,href:window.location.pathname,disabled:!0}),e.$emit("folderName",data.directory.dirname),e.$store.dispatch("saveCurrentLevel",data.directory.level),e.allFiles=data.files,e.allFolders=data.directories,e.emitFileLength()})).catch((function(){e.loading=!1})))},moveFolderToBin:function(e){var t=this;this.showDialog=!1;var r=this.getUser(this);this.loading=!0,this.$axios.put("/directory/single/bin",{_id:"".concat(e),user_id:r.id}).then((function(){t.$store.dispatch("fetchFolders",r.id),t.loading=!1,t.success.status=!0,t.success.message="Folder has successfully been moved to bin",w.a.$emit("hideAction")})).catch((function(e){t.loading=!1,t.error.status=!0,t.error.message=e.response.data.message}))},showFolderDetails:function(e){var t=this,r={};this.showDrawer=!0,this.loadingDetails=!0,this.$axios.get("directory/".concat(e)).then((function(e){var data=e.data;t.loadingDetails=!1,r.name=data.directory.dirname,r.lastUpdated=f()(data.directory.updatedAt).fromNow(),r.owner=data.directory.user_id.full_name,t.fileDetails=r,t.fileDetails.logs=data.logs}))},showFileDetails:function(e){var t=this,r=Object(d.a)(e,2),o=r[0],l=r[1],n={};this.showDrawer=!0,this.loadingDetails=!0,n.icon=l,this.$axios.get("files/".concat(o)).then((function(e){var data=e.data;t.loadingDetails=!1,n.name=data.file.filename,n.lastUpdated=f()(data.file.updatedAt).fromNow(),n.owner=data.file.user_id.full_name,n.link=data.file.file_url,t.fileDetails=n,t.fileDetails.logs=data.logs}))},emitFileLength:function(){var e=this.filteredFolders.length+this.allFiles.length;w.a.$emit("fileLength",e)}}},x=(r(668),r(21)),D=r(23),C=r.n(D),O=r(186),j=r(187),$=r(573),L=r(154),P=r(160),k=r(419),N=r(188),S=r(116),U=r(5),V=r(427),I=r(48),A=r(72),T=r(572),component=Object(x.a)(F,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"my-drive",attrs:{"grid-list-md":""}},[e.showPreview?r("Preview",{attrs:{show:e.showPreview,data:e.previewData},on:{hide:function(t){e.showPreview=!1}}}):e._e(),e._v(" "),r("v-navigation-drawer",{staticClass:"py-10",attrs:{temporary:"",right:"",app:"",fixed:"",clipped:"","overlay-opacity":"0.2",width:"300px"},model:{value:e.showDrawer,callback:function(t){e.showDrawer=t},expression:"showDrawer"}},[e.loadingDetails?r("Loader"):r("v-layout",{staticClass:"fill-height",attrs:{column:"","justify-center":"","align-center":""}},[r("img",{attrs:{src:e.fileDetails.icon,alt:"",width:"100px"}}),e._v(" "),r("ul",{staticClass:"px-4 file-details"},[r("li",{staticClass:"my-2"},[r("b",[e._v("File Name: ")]),e._v("\n          "+e._s(e.fileDetails.name)+"\n        ")]),e._v(" "),r("li",{staticClass:"my-2"},[r("b",[e._v("File Owner: ")]),e._v("\n          "+e._s(e.fileDetails.owner)+"\n        ")]),e._v(" "),r("li",{staticClass:"my-2"},[r("b",[e._v("Updated: ")]),e._v("\n          "+e._s(e.fileDetails.lastUpdated)+"\n        ")])]),e._v(" "),r("v-divider",{staticClass:"full-width divider"}),e._v(" "),r("div",{staticClass:"trails"},[r("v-list",e._l(e.fileDetails.logs,(function(t){return r("div",{key:t._id,staticClass:"list my-2"},[r("p",{staticClass:"my-0 pl-6 caption"},[e._v("\n              "+e._s(e._f("date")(t.createdAt))+"\n            ")]),e._v(" "),r("v-list-item",[t.user_id.picture_pic?r("v-avatar",{staticClass:"mx-2",attrs:{size:"35px",item:""}},[r("v-img",{attrs:{src:t.user_id.picture_pic,alt:"User Image"}})],1):r("v-avatar",{staticClass:"mx-2",attrs:{size:"35px",color:"primary",item:""}},[r("span",{staticClass:"white--text font-weight-medium"},[e._v("\n                  "+e._s(e.getUserInitials(t.user_id.full_name))+"\n                ")])]),e._v(" "),r("v-list-item-content",{staticClass:"py-1"},[r("v-list-item-title",{staticClass:"text-capitalize small--text"},[e._v("\n                  "+e._s(t.action)+" this "+e._s(t.type)+"\n                  "+e._s(t.shared_with&&"with "+t.shared_with.full_name)+"\n                ")]),e._v(" "),r("v-list-item-subtitle",{staticClass:"caption"},[e._v("\n                  "+e._s(t.user_id.full_name)+"\n                ")])],1)],1),e._v(" "),r("v-divider",{staticClass:"divider"})],1)})),0)],1),e._v(" "),r("v-layout",{staticClass:"file-actions px-8",attrs:{row:"","justify-space-between":""}},[r("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[r("a",e._g({attrs:{href:e.fileDetails.link,target:"_blank",download:""}},o),[r("v-icon",{attrs:{color:"primary",dark:""}},[e._v("\n                mdi-cloud-download-outline\n              ")])],1)]}}])},[e._v(" "),r("span",[e._v("Download")])]),e._v(" "),r("v-tooltip",{attrs:{top:""},scopedSlots:e._u([{key:"activator",fn:function(t){var o=t.on;return[r("a",e._g({attrs:{href:e.fileDetails.link,target:"_blank"}},o),[r("v-icon",{attrs:{color:"primary",dark:""}},[e._v("\n                mdi-open-in-new\n              ")])],1)]}}])},[e._v(" "),r("span",[e._v("Open")])])],1)],1)],1),e._v(" "),e.loading?r("Loader"):e._e(),e._v(" "),r("v-layout",{attrs:{"align-center":"","justify-space-between":"",row:"",wrap:""}},[r("v-flex",{attrs:{sm12:"",md2:""}},[r("v-select",{staticClass:"shadow",attrs:{items:e.fileTypes,label:"All Types",solo:"",dense:""},model:{value:e.fileType,callback:function(t){e.fileType=t},expression:"fileType"}})],1),e._v(" "),r("v-flex",{attrs:{sm12:"",md3:""}},[r("v-text-field",{staticClass:"shadow",attrs:{label:"Search Files","single-line":"",solo:"","prepend-inner-icon":"mdi-magnify",dense:""},model:{value:e.searchFiles,callback:function(t){e.searchFiles=t},expression:"searchFiles"}})],1)],1),e._v(" "),r("p",{staticClass:"font-weight-medium body-2"},[e._v("\n    Folders ("+e._s(e.filteredFolders.length)+")\n  ")]),e._v(" "),r("div",{staticClass:"files mb-5"},e._l(e.filteredFolders,(function(t,o){return r("Folder",{key:o,staticClass:"my-2",attrs:{"folder-name":t.dirname,"folder-id":t._id,"last-updated":t.updatedAt},on:{foldersSelected:function(r){return e.handleMultipleFolders(r,t)},moveFolder:e.moveFolder,moveFolderToBin:e.moveFolderToBin,viewDetails:e.showFolderDetails}})})),1),e._v(" "),r("p",{staticClass:"font-weight-medium body-2"},[e._v("Files ("+e._s(e.filteredFiles.length)+")")]),e._v(" "),r("div",{staticClass:"files mb-5 pb-5"},e._l(e.filteredFiles,(function(t){return r("File",{key:t.file_url,staticClass:"my-2",attrs:{format:t.file_extension,name:t.filename,"file-id":t._id,size:t.file_size,"last-edited":t.updatedAt},on:{filesSelected:function(r){return e.handleMultipleFiles(r,t)},moveFile:e.moveFile,deleteFile:e.deleteFile,viewDetails:e.showFileDetails,previewFile:function(r){return e.previewFile(t)}}})})),1)],1)}),[],!1,null,"85006d22",null),z=component.exports;function B(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(object);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,r)}return t}C()(component,{VAvatar:O.a,VDivider:j.a,VFlex:$.a,VIcon:L.a,VImg:P.a,VLayout:k.a,VList:N.a,VListItem:S.a,VListItemContent:U.a,VListItemSubtitle:U.b,VListItemTitle:U.c,VNavigationDrawer:V.a,VSelect:I.a,VTextField:A.a,VTooltip:T.a});var M={layout:"adminDrive",components:{Loader:n.a,FileView:z},data:function(){return{routeName:"",loading:!1,searchFiles:"",fileTypes:["pdf","Spreadsheets","Presentations"],fileType:"",selectedFiles:[],allFiles:[],allFolders:[],level:"",fileKey:"hello",folderName:""}},computed:function(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?B(Object(source),!0).forEach((function(t){Object(o.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):B(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}({},Object(l.b)(["getBreadCrumbs","getFolders","isLoggedIn","getUser","getUserFolders","getUserDirectories"]),{filteredFiles:function(){var e=this;return this.allFiles.filter((function(t){return t.filename.toLowerCase().includes(e.searchFiles.toLowerCase())}))},filteredFolders:function(){var e=this.routeName;return this.getUserDirectories.filter((function(t){return t.parent_dir===e}))}}),watch:{"$route.params.name":function(){this.fileKey+=1,this.routeName=this.$route.params.name}},mounted:function(){var e=this,t=this.isLoggedIn(this);this.$axios.defaults.headers.common.Authorization="Bearer ".concat(t),this.routeName=this.$route.params.name,this.$store.dispatch("fetchUser",this.$route.params.id).then((function(){var t=e.$store.getters.getUserDetails;e.fetchUserFiles(t.user._id,0),e.$store.dispatch("fetchUserFolders",t.user._id)}))},methods:{saveFolderName:function(e){this.folderName=e}},head:function(){return{title:this.folderName}}},E=(r(670),r(417)),K=Object(x.a)(M,(function(){var e=this.$createElement,t=this._self._c||e;return t("v-container",{staticClass:"my-drive",attrs:{"grid-list-md":""}},[this.loading?t("Loader"):this._e(),this._v(" "),t("file-view",{key:this.fileKey,on:{folderName:this.saveFolderName}})],1)}),[],!1,null,"43d368b2",null);t.default=K.exports;C()(K,{VContainer:E.a})}}]);